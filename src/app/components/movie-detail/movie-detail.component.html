@if (isLoading()) {
  <app-movie-detail-skeleton></app-movie-detail-skeleton>
} @else if (isError()) {
  <main class="min-h-screen flex justify-center items-center">
    <p>Something went wrong :(</p>
  </main>
} @else {
  <main
    class="min-h-screen p-5 grid grid-cols-1 md:grid-cols-[1fr_2fr] place-items-center gap-4 justify-center items-center">
    <figure class="relative w-[200px] md:w-[350px] aspect-[2/3] rounded-md overflow-hidden">
      <img priority [ngSrc]="movie()?.poster_path | transformImgPath" [alt]="movie()?.title" fill class="object-cover rounded-md" />
    </figure>
    <article class="flex flex-col gap-3">
      <header class="flex flex-wrap items-center gap-3 items-end">
        <h3 class="inline-block font-medium tracking-wider text-3xl md:text-4xl">{{ movie().title }}</h3>
        <div class="flex items-center gap-2 pb-1">
            <span class="inline-flex items-center gap-1 rounded-full bg-emerald-100 px-2 py-1
             text-xs font-semibold text-emerald-600">
              <app-icon-star></app-icon-star>
              <span>{{ movie().vote_average | convertRating }}</span>
            </span>
          <span class="text-xs text-slate-500 dark:text-slate-300/70">/10 Â· {{ movie().vote_count }} votes</span>
        </div>
      </header>
      <section class="flex items-center gap-3 text-sm text-slate-600 dark:text-slate-300/70">
        <p class="flex items-center gap-2">
          <span class="font-medium">{{ movie().release_date | date:'dd/MM/yyyy' }}</span>
          <span class="h-1 w-1 rounded-full bg-slate-400/70"></span>
          <span class="uppercase tracking-wide text-xs px-2 py-0.5 rounded-full bg-slate-800 text-slate-200
          dark:bg-slate-200 dark:text-slate-800">
          {{ movie().origin_country[0] }}</span>
        </p>
        <span class="h-1 w-1 rounded-full bg-slate-400/70"></span>
        <div class="inline-flex items-center gap-1 text-xs text-slate-500 dark:text-slate-300/70">
          <app-icon-clock></app-icon-clock>
          <span>{{ movie().runtime | convertTime }}</span>
        </div>
      </section>
      <section>
        <h5 class="font-medium text-lg">Genres</h5>
        <div class="flex flex-wrap gap-2 py-2">
          @for (genre of movie().genres; track genre.id) {
            <span
              class="bg-sky-200 border text-slate-700 text-xs font-medium px-1.5 py-1 rounded-xl dark:border-slate-200">
            {{ genre.name }}
          </span>
          }
        </div>
      </section>
      <section>
        <p class="italic text-slate-500 pb-1">{{ movie()?.tagline }}</p>
        <h5 class="font-medium text-lg">Overview</h5>
        <p class="md:pr-[100px]">{{ movie().overview }}</p>
      </section>
      <footer>
        <button
          type="button"
          (click)="goBack()"
          class="mt-5 w-min inline-flex items-center gap-2
          rounded-full border px-3 py-1 text-sm font-medium
          dark:border-slate-300 dark:bg-slate-100 dark:text-slate-900
          shadow-sm transition-colors
          dark:hover:bg-slate-200 dark:hover:border-slate-400
          border-slate-600 bg-slate-900 text-slate-100
          hover:bg-slate-800 hover:border-slate-400
          focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-500/60 cursor-pointer"
        >
          <app-icon-back></app-icon-back>
          <span>Back</span>
        </button>
      </footer>
    </article>
  </main>
}
